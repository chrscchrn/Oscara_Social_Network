{"version":3,"sources":["Util/API.js","pages/Front.js"],"names":["axios__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","getUserByEmail","email","axios","get","getUserByHandle","handle","addUser","data","post","getPosts","makePost","getUsersPosts","removePost","id","delete","likePost","postId","currentUser","replyToPost","getReplies","FrontComponent","React","lazy","e","then","bind","SignupSteps","Promise","all","AddImage","Newsfeed","finishSetup","window","location","reload","Front","_useState","useState","new_user","_useState2","Object","C_Users_cochr_Desktop_social_media_r_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","userState","setUserState","_useState3","_useState4","SQLImages","setSQLImages","_useState5","_useState6","imageName","setImageName","_useAuth","useAuth0","user","isAuthenticated","isLoading","useEffect","API","res","C_Users_cochr_Desktop_social_media_r_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","catch","err","console","log","uploadedPic","response","fileName","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","react__WEBPACK_IMPORTED_MODULE_2__","fallback","_components_Loading__WEBPACK_IMPORTED_MODULE_3__","images"],"mappings":"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","file":"static/js/12.3c4e47a7.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport default {\r\n    getUserByEmail: email => {\r\n        return axios.get('/api/user/' + email);\r\n    },\r\n    getUserByHandle: handle => {\r\n        return axios.get('/api/user/handle/' + handle);\r\n    },\r\n    addUser: data => {\r\n        return axios.post('/api/user/add', data);\r\n    },\r\n    getPosts: () => {\r\n        return axios.get('/api/posts');\r\n    },\r\n    makePost: post => {\r\n        return axios.post('/api/posts', post);\r\n    },\r\n    getUsersPosts: data => {\r\n        return axios.get('/api/posts/' + data);\r\n    },\r\n    removePost: id => {\r\n        return axios.delete('/api/posts/' + id);\r\n    },\r\n    likePost: (postId, currentUser) => {\r\n        return axios.get(\"/api/posts/\" + postId + \"/\" + currentUser)\r\n    },\r\n    replyToPost: data => {\r\n        return axios.post('/api/posts/reply', data);\r\n    },\r\n    getReplies: id => {\r\n        return axios.get(\"/api/posts/reply/\" + id);\r\n    },\r\n}","import React, { useState, useEffect, Suspense } from \"react\";\r\nimport Loading from \"../components/Loading\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport axios from 'axios';\r\nimport API from \"../Util/API\";\r\n\r\nconst FrontComponent = React.lazy(() => import('../components/FrontComponent'));\r\nconst SignupSteps = React.lazy(() => import(\"./SignupSteps\"));\r\nconst AddImage = React.lazy(() => import(\"../components/AddImage\"));\r\nconst Newsfeed = React.lazy(() => import(\"./Newsfeed\"));\r\n\r\nfunction finishSetup() {\r\n    window.location.reload();\r\n}\r\n\r\nexport default function Front() {\r\n\r\n    const [ userState, setUserState ] = useState({ new_user: true });\r\n    const [ SQLImages, setSQLImages ] = useState([]);\r\n    const [ imageName, setImageName ] = useState([]);\r\n    const { user, isAuthenticated, isLoading } = useAuth0();\r\n    \r\n    useEffect(() => {\r\n        if (isAuthenticated) {\r\n            API.getUserByEmail(user.email)\r\n            .then(res => {\r\n                if (res.data.email !== null) {\r\n                    setUserState({\r\n                        ...userState,\r\n                        new_user: false,\r\n                        handle: res.data.handle\r\n                    });\r\n                }\r\n            }).catch(err => {\r\n                console.log(err);\r\n                setUserState({\r\n                    ...userState,\r\n                    new_user: true,\r\n                    uploadedPic: false,\r\n                });\r\n            });\r\n        }\r\n    }, [isAuthenticated]);\r\n    \r\n    useEffect(() => {\r\n        if (isAuthenticated && !isLoading && !userState.new_user) {\r\n            axios.get('/api/image/' + user.email)\r\n                .then(response => {\r\n                    if (response.data.data === null) {\r\n                        setUserState({...userState, uploadedPic: false });\r\n                    } else {\r\n                        setUserState({...userState, uploadedPic: true});\r\n                        setSQLImages(response.data.data);\r\n                        setImageName(response.data.fileName);\r\n                    }\r\n                }).catch(err => {\r\n                    console.log(err);\r\n                });\r\n        }\r\n    }, [userState.new_user]);\r\n\r\n    if (!isLoading && !isAuthenticated) {\r\n        return (\r\n            <Suspense fallback={<Loading/>}>\r\n                <FrontComponent/>\r\n            </Suspense>\r\n        );\r\n    }\r\n    if (!isLoading && isAuthenticated && userState.new_user === true && userState.uploadedPic === false) {\r\n        return (\r\n            <Suspense fallback={<Loading/>}>\r\n                <SignupSteps/>\r\n            </Suspense>\r\n        );\r\n    }\r\n    if (!isLoading && isAuthenticated && userState.new_user === false && userState.uploadedPic === false) {\r\n        return ( // refactor\r\n            <Suspense fallback={<Loading/>}>\r\n                <AddImage email={user.email} finishSetup={finishSetup}/>\r\n            </Suspense>    \r\n        );\r\n    }\r\n    if (!isLoading && isAuthenticated && userState.new_user === false && userState.uploadedPic === true) {\r\n        return (\r\n            <Suspense fallback={<Loading/>}>\r\n                <Newsfeed \r\n                    images={SQLImages} \r\n                    imageName={imageName} \r\n                    handle={userState.handle}\r\n                />\r\n            </Suspense>\r\n        );\r\n    }\r\n    return <Loading/>;\r\n}"],"sourceRoot":""}